{"version":3,"file":"consultation.js","sources":["../src/sections/consultation.js"],"sourcesContent":["import './consultation.scss'\r\n\r\nconst consultationEl = document.querySelector('#consultation');\r\nconst applicationEl = document.querySelector('#application');\r\n\r\nif (consultationEl) {\r\n  // form\r\n  const form = consultationEl.querySelector('#consultForm');\r\n  const submitBtn = form.querySelector('button[type=\"submit\"]');\r\n  const inputs = form.querySelectorAll('input[required], span[contenteditable]');\r\n  const phoneInput = form.querySelector('#consultPhone');\r\n  const checkbox = form.querySelector('#consultCheckbox');\r\n\r\n  // results\r\n  const resultSuccessEl = applicationEl.querySelector('.result.result--success');\r\n  const resultErrorEl = applicationEl.querySelector('.result.result--error');\r\n\r\n  const checkValidity = () => {\r\n    const isValid = form.checkValidity() && checkbox.checked && phoneInput && phoneInput.dataset.valid === 'true';\r\n    submitBtn.disabled =  !isValid;\r\n\r\n    return isValid;\r\n  };\r\n\r\n  inputs.forEach(el => el.addEventListener('input', checkValidity));\r\n  checkbox.addEventListener('change', checkValidity);\r\n\r\n  form.querySelectorAll('span[contenteditable]').forEach(el => {\r\n    el.addEventListener('paste', e => {\r\n      e.preventDefault();\r\n      const text = (e.clipboardData || window.clipboardData).getData('text');\r\n      document.execCommand('insertText', false, text);\r\n      checkValidity();\r\n    });\r\n  });\r\n\r\n  form.addEventListener('submit', (e)=>{\r\n    e.preventDefault();\r\n\r\n    if (!checkValidity()) return;\r\n\r\n    const innerEl = applicationEl.querySelector('.application__inner');\r\n    const applicationButton = applicationEl.querySelector('[data-popup-target=\"application\"]');\r\n    innerEl.style.display = 'block';\r\n\r\n    applicationButton.click();\r\n\r\n    // todo переделать в проде. сейчас для демонстрации ошибки сервера\r\n    if (phoneInput.value === '1111111111') {\r\n      resultErrorEl.style.display = 'flex';\r\n    } else {\r\n      resultSuccessEl.style.display = 'flex';\r\n    }\r\n\r\n  });\r\n  checkValidity();\r\n}"],"names":["consultationEl","applicationEl","form","submitBtn","inputs","phoneInput","checkbox","resultSuccessEl","resultErrorEl","checkValidity","isValid","el","e","text","innerEl","applicationButton"],"mappings":"AAEA,MAAMA,EAAiB,SAAS,cAAc,eAAe,EACvDC,EAAgB,SAAS,cAAc,cAAc,EAE3D,GAAID,EAAgB,CAElB,MAAME,EAAOF,EAAe,cAAc,cAAc,EAClDG,EAAYD,EAAK,cAAc,uBAAuB,EACtDE,EAASF,EAAK,iBAAiB,wCAAwC,EACvEG,EAAaH,EAAK,cAAc,eAAe,EAC/CI,EAAWJ,EAAK,cAAc,kBAAkB,EAGhDK,EAAkBN,EAAc,cAAc,yBAAyB,EACvEO,EAAgBP,EAAc,cAAc,uBAAuB,EAEnEQ,EAAgB,IAAM,CAC1B,MAAMC,EAAUR,EAAK,cAAa,GAAMI,EAAS,SAAWD,GAAcA,EAAW,QAAQ,QAAU,OACvG,OAAAF,EAAU,SAAY,CAACO,EAEhBA,CACX,EAEEN,EAAO,QAAQO,GAAMA,EAAG,iBAAiB,QAASF,CAAa,CAAC,EAChEH,EAAS,iBAAiB,SAAUG,CAAa,EAEjDP,EAAK,iBAAiB,uBAAuB,EAAE,QAAQS,GAAM,CAC3DA,EAAG,iBAAiB,QAASC,GAAK,CAChCA,EAAE,eAAc,EAChB,MAAMC,GAAQD,EAAE,eAAiB,OAAO,eAAe,QAAQ,MAAM,EACrE,SAAS,YAAY,aAAc,GAAOC,CAAI,EAC9CJ,GACN,CAAK,CACL,CAAG,EAEDP,EAAK,iBAAiB,SAAW,GAAI,CAGnC,GAFA,EAAE,eAAc,EAEZ,CAACO,EAAa,EAAI,OAEtB,MAAMK,EAAUb,EAAc,cAAc,qBAAqB,EAC3Dc,EAAoBd,EAAc,cAAc,mCAAmC,EACzFa,EAAQ,MAAM,QAAU,QAExBC,EAAkB,MAAK,EAGnBV,EAAW,QAAU,aACvBG,EAAc,MAAM,QAAU,OAE9BD,EAAgB,MAAM,QAAU,MAGtC,CAAG,EACDE,GACF"}